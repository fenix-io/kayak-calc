# Output Data Formats

**Kayak Calculation Tool - Data Export Documentation**

This document describes all output file formats generated by the kayak calculation tool's export functions.

## Table of Contents

1. [CSV Exports](#csv-exports)
   - [Hydrostatic Properties](#hydrostatic-properties-csv)
   - [Stability Curve](#stability-curve-csv)
   - [Stability Metrics](#stability-metrics-csv)
   - [Righting Arm](#righting-arm-csv)
   - [Center of Gravity Summary](#center-of-gravity-summary-csv)
   - [Cross-Sectional Properties](#cross-sectional-properties-csv)
   - [Waterline Comparison](#waterline-comparison-csv)
2. [Report Formats](#report-formats)
   - [Hydrostatic Report](#hydrostatic-report-markdown)
   - [Stability Report](#stability-report-markdown)
   - [Complete Analysis Report](#complete-analysis-report-markdown)
3. [Usage Examples](#usage-examples)

---

## CSV Exports

All CSV files include metadata comments (lines starting with `#`) at the top of the file, followed by a header row and data rows.

### Hydrostatic Properties CSV

**Purpose:** Export displacement volume, center of buoyancy coordinates, and waterline information.

**Filename convention:** `hydrostatic_properties.csv`, `hydrostatics.csv`

**Format:**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Hydrostatic Properties
# Waterline Z: -0.100000 m
# Number of Stations: 9
# Integration Method: simpson
#
Property,Value,Unit
Volume,0.275000,m³
Displacement,281.875000,kg
LCB (Longitudinal CB),2.500000,m
VCB (Vertical CB),-0.150000,m
TCB (Transverse CB),0.000000,m
Waterline Z,-0.100000,m
Heel Angle,0.000000,degrees
```

**Columns:**
- `Property`: Name of the property
- `Value`: Numerical value
- `Unit`: Unit of measurement

**Properties included:**
- Volume (m³)
- Displacement (kg) - calculated as volume × water density
- LCB - Longitudinal Center of Buoyancy (m)
- VCB - Vertical Center of Buoyancy (m)
- TCB - Transverse Center of Buoyancy (m)
- Waterline Z (m)
- Heel Angle (degrees)

---

### Stability Curve CSV

**Purpose:** Export GZ (righting arm) values vs. heel angle for stability analysis.

**Filename convention:** `stability_curve.csv`, `gz_curve.csv`

**Format (with CB data):**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Stability Curve
# Waterline Z: -0.100000 m
# CG Position: LCG=2.500, VCG=-0.300, TCG=0.000 m
# Total Mass: 100.00 kg
# Number of Points: 19
# Integration Method: simpson
#
Heel_Angle_deg,GZ_m,LCB_m,VCB_m,TCB_m
0.000000,0.000000,2.500000,-0.150000,0.000000
5.000000,0.012500,2.500200,-0.149800,0.010500
10.000000,0.024800,2.500800,-0.149200,0.021000
...
```

**Columns (with CB):**
- `Heel_Angle_deg`: Heel angle in degrees
- `GZ_m`: Righting arm in meters (positive = righting, negative = capsizing)
- `LCB_m`: Longitudinal center of buoyancy (optional)
- `VCB_m`: Vertical center of buoyancy (optional)
- `TCB_m`: Transverse center of buoyancy (optional)

**Format (without CB data):**
```csv
Heel_Angle_deg,GZ_m
0.000000,0.000000
5.000000,0.012500
10.000000,0.024800
...
```

**Usage Notes:**
- Typically covers 0° to 90° heel angle range
- Can be imported into plotting software
- Positive GZ indicates stable (righting) region
- Zero crossing indicates angle of vanishing stability

---

### Stability Metrics CSV

**Purpose:** Export key stability parameters derived from GZ curve analysis.

**Filename convention:** `stability_metrics.csv`, `metrics.csv`

**Format:**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Stability Metrics
# Waterline Z: -0.100000 m
# CG Position: LCG=2.500, VCG=-0.300, TCG=0.000 m
#
Metric,Value,Unit
GM (Metacentric Height),0.350000,m
Maximum GZ,0.245000,m
Angle of Maximum GZ,35.000000,degrees
Range Positive Stability (Min),0.000000,degrees
Range Positive Stability (Max),75.000000,degrees
Angle of Vanishing Stability,75.000000,degrees
Dynamic Stability (Area Under Curve),0.185000,m·rad
```

**Columns:**
- `Metric`: Name of the stability metric
- `Value`: Numerical value (or "N/A" if not calculated)
- `Unit`: Unit of measurement

**Metrics included:**
- **GM (Metacentric Height)**: Initial stability measure (m)
- **Maximum GZ**: Largest righting arm value (m)
- **Angle of Maximum GZ**: Heel angle at max GZ (degrees)
- **Range Positive Stability**: Heel angle range where GZ > 0 (min/max, degrees)
- **Angle of Vanishing Stability**: Angle where stability is lost (degrees)
- **Dynamic Stability**: Area under GZ curve representing energy to heel (m·rad)

---

### Righting Arm CSV

**Purpose:** Export detailed calculation results for a single heel angle.

**Filename convention:** `righting_arm_30deg.csv`, `gz_single.csv`

**Format:**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Righting Arm (Single Angle)
# Heel Angle: 30.000000 degrees
# Waterline Z: -0.100000 m
#
Property,Value,Unit
Heel Angle,30.000000,degrees
GZ (Righting Arm),0.195000,m
Stable,True,

Center of Buoyancy,,
LCB,2.500500,m
VCB,-0.145000,m
TCB,0.095000,m
Volume,0.275000,m³
Displacement,281.875000,kg

Center of Gravity,,
LCG,2.500000,m
VCG,-0.300000,m
TCG,0.000000,m
```

**Sections:**
1. **Heel Angle and GZ**: Basic calculation results
2. **Center of Buoyancy**: Position and volume at this heel angle
3. **Center of Gravity**: CG position (for reference)

---

### Center of Gravity Summary CSV

**Purpose:** Export CG position and optionally component mass breakdown.

**Filename convention:** `cg_summary.csv`, `cg.csv`

**Format (with components):**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Center of Gravity Summary
# Total Mass: 100.000000 kg
# Number of Components: 2
#
Total Center of Gravity,,
Property,Value,Unit
LCG (Longitudinal),2.440000,m
VCG (Vertical),-0.360000,m
TCG (Transverse),0.000000,m
Total Mass,100.000000,kg

Component Breakdown,,
Component,Mass_kg,LCG_m,VCG_m,TCG_m
Kayak,20.000000,2.500000,-0.100000,0.000000
Paddler,80.000000,2.400000,-0.400000,0.000000
```

**Sections:**
1. **Total CG**: Combined center of gravity
2. **Component Breakdown**: Individual mass contributions (if available)

---

### Cross-Sectional Properties CSV

**Purpose:** Export area, centroid, and waterline beam at each station along hull length.

**Filename convention:** `cross_sections.csv`, `sections.csv`

**Format:**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Cross-Sectional Properties
# Waterline Z: -0.100000 m
# Heel Angle: 0.000000 degrees
# Number of Stations: 10
# Hull Length: 5.000000 m
#
Station_m,Area_m2,Centroid_Y_m,Centroid_Z_m,Waterline_Beam_m
0.000000,0.025000,0.000000,-0.180000,0.600000
0.555556,0.030000,0.000000,-0.175000,0.650000
1.111111,0.032000,0.000000,-0.170000,0.680000
...
```

**Columns:**
- `Station_m`: Longitudinal position (x-coordinate in meters)
- `Area_m2`: Submerged cross-sectional area (m²)
- `Centroid_Y_m`: Transverse centroid position (m)
- `Centroid_Z_m`: Vertical centroid position (m)
- `Waterline_Beam_m`: Beam at waterline (m)

**Usage Notes:**
- Useful for understanding volume distribution
- Can identify narrow/wide sections
- Centroid shows balance point of each section

---

### Waterline Comparison CSV

**Purpose:** Compare stability metrics at different waterline levels (different drafts).

**Filename convention:** `waterline_comparison.csv`, `multi_waterline.csv`

**Format:**
```csv
# Generated: 2025-12-25 10:30:00
# Kayak Calculation Tool - Data Export
#
# Export Type: Waterline Comparison
# Number of Waterlines: 3
#
Waterline_Z_m,GM_m,Max_GZ_m,Angle_Max_GZ_deg,Vanishing_Angle_deg,Range_Min_deg,Range_Max_deg,Area_Under_Curve_m_rad
-0.200000,0.280000,0.210000,32.000000,72.000000,0.000000,72.000000,0.150000
-0.100000,0.350000,0.245000,35.000000,75.000000,0.000000,75.000000,0.185000
0.000000,0.420000,0.280000,38.000000,78.000000,0.000000,78.000000,0.220000
```

**Columns:**
- `Waterline_Z_m`: Waterline vertical position (m)
- `GM_m`: Metacentric height (m)
- `Max_GZ_m`: Maximum righting arm (m)
- `Angle_Max_GZ_deg`: Angle at max GZ (degrees)
- `Vanishing_Angle_deg`: Angle of vanishing stability (degrees)
- `Range_Min_deg`: Start of positive stability range (degrees)
- `Range_Max_deg`: End of positive stability range (degrees)
- `Area_Under_Curve_m_rad`: Dynamic stability area (m·rad)

**Usage Notes:**
- Compare stability at different loading conditions
- Analyze effect of draft on stability
- Typically sorted by increasing waterline level

---

## Report Formats

All reports are generated in Markdown format, which can be:
- Viewed in any text editor
- Rendered as formatted documents
- Converted to PDF or HTML
- Included in documentation

### Hydrostatic Report (Markdown)

**Purpose:** Comprehensive hydrostatic analysis summary.

**Filename convention:** `hydrostatic_report.md`

**Structure:**
```markdown
# Hydrostatic Analysis Report

**Generated:** 2025-12-25 10:30:00  
**Hull Name:** Sample Kayak Hull  

## Hydrostatic Properties

### Hull Geometry
- Length: 5.000 m
- Maximum Beam: 0.600 m
- Number of Profiles: 9

### Displacement
- Volume: 0.2750 m³
- Mass: 281.9 kg

### Center of Buoyancy
- LCB (Longitudinal): 2.500 m
- VCB (Vertical): -0.150 m
- TCB (Transverse): 0.000 m

### Waterline
- Z-coordinate: -0.100 m
- Heel angle: 0.0°

## Calculation Details
- Number of Stations: 9
- Integration Method: simpson
```

---

### Stability Report (Markdown)

**Purpose:** Comprehensive stability analysis summary.

**Filename convention:** `stability_report.md`

**Structure:**
```markdown
# Stability Analysis Report

**Generated:** 2025-12-25 10:30:00  
**Hull Name:** Sample Kayak Hull  

## Configuration

- Waterline: z = -0.100 m
- CG Position: LCG=2.500 m, VCG=-0.300 m, TCG=0.000 m
- Total Mass: 100.0 kg
- Heel Angle Range: 0.0° to 90.0°
- Number of Points: 19

## Stability Metrics

### Initial Stability
- GM (Metacentric Height): 0.350 m

### Maximum Righting Arm
- Maximum GZ: 0.245 m
- Angle of Maximum GZ: 35.0°

### Range of Stability
- Range of Positive Stability: 0.0° to 75.0°
- Angle of Vanishing Stability: 75.0°

### Dynamic Stability
- Area Under Curve: 0.1850 m·rad

## Calculation Details
- Number of Stations: 9
- Integration Method: simpson
```

**Optional Section (if criteria provided):**
```markdown
## Stability Criteria Assessment

### GM Criterion: ✓ PASS
- GM must be greater than 0.35 m for adequate initial stability
- Required: > 0.35 m
- Actual: 0.350 m

### Maximum GZ Criterion: ✓ PASS
- Maximum GZ must be at least 0.20 m
- Required: ≥ 0.20 m
- Actual: 0.245 m
```

---

### Complete Analysis Report (Markdown)

**Purpose:** Comprehensive report combining all analysis results.

**Filename convention:** `complete_analysis_report.md`, `full_report.md`

**Structure:**
```markdown
# Complete Kayak Analysis Report

**Generated:** 2025-12-25 10:30:00  
**Kayak Calculation Tool**  
**Hull Name:** Sample Kayak Hull  
**Description:** Comprehensive stability and hydrostatic analysis  

---

## Table of Contents

1. [Hull Geometry](#hull-geometry)
2. [Hydrostatic Properties](#hydrostatic-properties)
3. [Center of Gravity](#center-of-gravity)
4. [Stability Analysis](#stability-analysis)
5. [Stability Criteria](#stability-criteria-assessment)

---

## Hull Geometry

- Length: 5.000 m
- Maximum Beam: 0.600 m
- Number of Profiles: 9
- Station Range: 0.000 m to 5.000 m

## Hydrostatic Properties

[Same as Hydrostatic Report]

## Center of Gravity

- LCG (Longitudinal): 2.500 m
- VCG (Vertical): -0.300 m
- TCG (Transverse): 0.000 m
- Total Mass: 100.0 kg
- Number of Components: 1

## Stability Analysis

[Same as Stability Report]

## Calculation Details

- Number of Stations: 9
- Integration Method: simpson
- Number of Heel Angles: 19

---

*Report generated by Kayak Calculation Tool*
```

---

## Usage Examples

### Export Hydrostatic Properties

```python
from src.hydrostatics import calculate_center_of_buoyancy
from src.io import export_hydrostatic_properties

# Calculate CB
cb = calculate_center_of_buoyancy(hull, waterline_z=-0.1)

# Export to CSV
export_hydrostatic_properties(
    cb,
    filepath='output/hydrostatics.csv',
    metadata={'hull_name': 'My Kayak'}
)
```

### Export Stability Curve

```python
from src.stability import StabilityAnalyzer
from src.io import export_stability_curve

# Create analyzer
analyzer = StabilityAnalyzer(hull, cg, waterline_z=-0.1)

# Generate curve
curve = analyzer.generate_stability_curve(max_angle=60)

# Export with CB data
export_stability_curve(
    curve,
    filepath='output/stability_curve.csv',
    include_cb=True
)
```

### Generate Complete Report

```python
from src.stability import StabilityAnalyzer
from src.io import generate_complete_report

# Perform analysis
analyzer = StabilityAnalyzer(hull, cg, waterline_z=-0.1)
curve = analyzer.generate_stability_curve()
metrics = analyzer.analyze_stability()

# Generate report
generate_complete_report(
    hull, cg, curve, metrics,
    filepath='output/complete_report.md',
    metadata={'name': 'My Kayak', 'description': 'Full analysis'}
)
```

### Complete Workflow

```python
from src.io import (
    load_hull_from_json,
    export_hydrostatic_properties,
    export_stability_curve,
    export_stability_metrics,
    generate_complete_report
)
from src.hydrostatics import CenterOfGravity, calculate_center_of_buoyancy
from src.stability import StabilityAnalyzer

# Load hull
hull = load_hull_from_json('data/my_kayak.json')

# Define CG
cg = CenterOfGravity(lcg=2.5, vcg=-0.3, tcg=0.0, total_mass=100.0)

# Analyze
analyzer = StabilityAnalyzer(hull, cg, waterline_z=-0.1)
cb = calculate_center_of_buoyancy(hull, waterline_z=-0.1)
curve = analyzer.generate_stability_curve()
metrics = analyzer.analyze_stability()

# Export everything
export_hydrostatic_properties(cb, 'output/hydrostatics.csv')
export_stability_curve(curve, 'output/gz_curve.csv')
export_stability_metrics(metrics, 'output/metrics.csv')
generate_complete_report(hull, cg, curve, metrics, 'output/report.md')
```

---

## Notes

### CSV Format Notes

- All CSV files use comma (`,`) as delimiter
- Decimal separator is period (`.`)
- Missing or invalid values represented as `N/A`
- Metadata lines start with `#` and are ignored by most CSV readers
- All numeric precision configurable (default: 6 decimal places)

### Units

Standard SI units throughout:
- **Length**: meters (m)
- **Mass**: kilograms (kg)
- **Area**: square meters (m²)
- **Volume**: cubic meters (m³)
- **Angle**: degrees (°) for display, radians internally
- **Dynamic stability**: meter-radians (m·rad)

### File Organization

Recommended output directory structure:
```
output/
├── hydrostatics.csv
├── stability_curve.csv
├── metrics.csv
├── cg.csv
├── cross_sections.csv
├── hydrostatic_report.md
├── stability_report.md
└── complete_report.md
```

### Integration with Other Tools

CSV files can be imported into:
- Microsoft Excel / LibreOffice Calc
- MATLAB / Octave
- Python (pandas, numpy)
- R
- Plotting software (gnuplot, matplotlib, etc.)

Markdown reports can be converted to:
- PDF (using pandoc, markdown-pdf, etc.)
- HTML (using markdown processors)
- Word documents (using pandoc)
- LaTeX (using pandoc)

---

## See Also

- [DATA_FORMATS.md](DATA_FORMATS.md) - Input data formats
- [README.md](README.md) - General documentation
- [examples/data_output_examples.py](examples/data_output_examples.py) - Example scripts
- API documentation in source code docstrings
